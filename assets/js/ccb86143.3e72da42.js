"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[363],{7636:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"web/template/tpl","title":"\u6a21\u677f\u5f15\u64ce","description":"WebFrame \u6846\u67b6\u96c6\u6210\u4e86\u4e00\u4e2a\u5f3a\u5927\u800c\u7075\u6d3b\u7684\u6a21\u677f\u5f15\u64ce\uff0c\u57fa\u4e8e Go \u7684\u6807\u51c6\u6a21\u677f\u5e93\u6784\u5efa\uff0c\u540c\u65f6\u63d0\u4f9b\u4e86\u8bb8\u591a\u589e\u5f3a\u529f\u80fd\uff0c\u5982\u81ea\u52a8\u91cd\u8f7d\u3001\u5e03\u5c40\u6a21\u677f\u652f\u6301\u548c\u81ea\u5b9a\u4e49\u51fd\u6570\u3002\u672c\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u6a21\u677f\u5f15\u64ce\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u4ece\u57fa\u7840\u7528\u6cd5\u5230\u9ad8\u7ea7\u7279\u6027\u3002","source":"@site/docs/web/template/tpl.md","sourceDirName":"web/template","slug":"/web/template/tpl","permalink":"/fyer-webframe/docs/web/template/tpl","draft":false,"unlisted":false,"editUrl":"https://github.com/fyerfyer/fyer-webframe/tree/main/docs/web/template/tpl.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Session","permalink":"/fyer-webframe/docs/web/session/sess"}}');var a=r(4848),l=r(8453);const i={},s="\u6a21\u677f\u5f15\u64ce",d={},c=[{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5",level:2},{value:"\u521d\u59cb\u5316\u6a21\u677f\u5f15\u64ce",id:"\u521d\u59cb\u5316\u6a21\u677f\u5f15\u64ce",level:3},{value:"\u914d\u7f6e\u6a21\u677f\u5f15\u64ce\u9009\u9879",id:"\u914d\u7f6e\u6a21\u677f\u5f15\u64ce\u9009\u9879",level:3},{value:"\u96c6\u6210\u5230 HTTP \u670d\u52a1\u5668",id:"\u96c6\u6210\u5230-http-\u670d\u52a1\u5668",level:3},{value:"\u6e32\u67d3\u6a21\u677f",id:"\u6e32\u67d3\u6a21\u677f",level:3},{value:"\u7ba1\u7406\u6a21\u677f\u6587\u4ef6",id:"\u7ba1\u7406\u6a21\u677f\u6587\u4ef6",level:3},{value:"\u81ea\u5b9a\u4e49\u51fd\u6570",id:"\u81ea\u5b9a\u4e49\u51fd\u6570",level:2},{value:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u51fd\u6570",id:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u51fd\u6570",level:3},{value:"\u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u51fd\u6570",id:"\u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u51fd\u6570",level:3},{value:"\u5e38\u7528\u81ea\u5b9a\u4e49\u51fd\u6570\u793a\u4f8b",id:"\u5e38\u7528\u81ea\u5b9a\u4e49\u51fd\u6570\u793a\u4f8b",level:3},{value:"\u5e03\u5c40\u6a21\u677f",id:"\u5e03\u5c40\u6a21\u677f",level:2},{value:"\u521b\u5efa\u5e03\u5c40\u6a21\u677f",id:"\u521b\u5efa\u5e03\u5c40\u6a21\u677f",level:3},{value:"\u521b\u5efa\u5185\u5bb9\u6a21\u677f",id:"\u521b\u5efa\u5185\u5bb9\u6a21\u677f",level:3},{value:"\u4f7f\u7528\u6a21\u677f\u7ec4\u5408",id:"\u4f7f\u7528\u6a21\u677f\u7ec4\u5408",level:3},{value:"\u5d4c\u5957\u6a21\u677f\u548c\u90e8\u5206\u89c6\u56fe",id:"\u5d4c\u5957\u6a21\u677f\u548c\u90e8\u5206\u89c6\u56fe",level:3},{value:"\u9ad8\u7ea7\u5e03\u5c40\u6280\u5de7",id:"\u9ad8\u7ea7\u5e03\u5c40\u6280\u5de7",level:3},{value:"\u591a\u7ea7\u5e03\u5c40",id:"\u591a\u7ea7\u5e03\u5c40",level:4},{value:"\u6570\u636e\u7ec4\u5408",id:"\u6570\u636e\u7ec4\u5408",level:4}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"\u6a21\u677f\u5f15\u64ce",children:"\u6a21\u677f\u5f15\u64ce"})}),"\n",(0,a.jsx)(n.p,{children:"WebFrame \u6846\u67b6\u96c6\u6210\u4e86\u4e00\u4e2a\u5f3a\u5927\u800c\u7075\u6d3b\u7684\u6a21\u677f\u5f15\u64ce\uff0c\u57fa\u4e8e Go \u7684\u6807\u51c6\u6a21\u677f\u5e93\u6784\u5efa\uff0c\u540c\u65f6\u63d0\u4f9b\u4e86\u8bb8\u591a\u589e\u5f3a\u529f\u80fd\uff0c\u5982\u81ea\u52a8\u91cd\u8f7d\u3001\u5e03\u5c40\u6a21\u677f\u652f\u6301\u548c\u81ea\u5b9a\u4e49\u51fd\u6570\u3002\u672c\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u6a21\u677f\u5f15\u64ce\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u4ece\u57fa\u7840\u7528\u6cd5\u5230\u9ad8\u7ea7\u7279\u6027\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u57fa\u7840\u7528\u6cd5",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,a.jsx)(n.h3,{id:"\u521d\u59cb\u5316\u6a21\u677f\u5f15\u64ce",children:"\u521d\u59cb\u5316\u6a21\u677f\u5f15\u64ce"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'// \u521b\u5efa\u57fa\u672c\u6a21\u677f\u5f15\u64ce\r\ntpl := web.NewGoTemplate()\r\n\r\n// \u4f7f\u7528\u9009\u9879\u6a21\u5f0f\u914d\u7f6e\u6a21\u677f\u5f15\u64ce\r\ntpl := web.NewGoTemplate(\r\n    web.WithPattern("./templates/*.html"), // \u4ece\u6a21\u5f0f\u52a0\u8f7d\u6a21\u677f\r\n    web.WithAutoReload(true),             // \u5f00\u542f\u81ea\u52a8\u91cd\u8f7d\r\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u914d\u7f6e\u6a21\u677f\u5f15\u64ce\u9009\u9879",children:"\u914d\u7f6e\u6a21\u677f\u5f15\u64ce\u9009\u9879"}),"\n",(0,a.jsx)(n.p,{children:"WebFrame \u4f7f\u7528\u9009\u9879\u6a21\u5f0f\u8fdb\u884c\u6a21\u677f\u5f15\u64ce\u7684\u914d\u7f6e\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'// \u4ece\u7279\u5b9a\u6a21\u5f0f\u52a0\u8f7d\u6a21\u677f\r\ntpl := web.NewGoTemplate(web.WithPattern("./views/*.html"))\r\n\r\n// \u4ece\u6307\u5b9a\u6587\u4ef6\u5217\u8868\u52a0\u8f7d\u6a21\u677f\r\ntpl := web.NewGoTemplate(web.WithFiles(\r\n    "./views/layout.html",\r\n    "./views/home.html",\r\n    "./views/user.html",\r\n))\r\n\r\n// \u542f\u7528\u81ea\u52a8\u91cd\u8f7d\uff08\u5f00\u53d1\u73af\u5883\u63a8\u8350\uff09\r\ntpl := web.NewGoTemplate(web.WithAutoReload(true))\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u96c6\u6210\u5230-http-\u670d\u52a1\u5668",children:"\u96c6\u6210\u5230 HTTP \u670d\u52a1\u5668"}),"\n",(0,a.jsx)(n.p,{children:"\u5c06\u6a21\u677f\u5f15\u64ce\u96c6\u6210\u5230 WebFrame HTTP \u670d\u52a1\u5668:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'// \u65b9\u6cd5 1: \u5728\u521b\u5efa\u670d\u52a1\u5668\u65f6\u8bbe\u7f6e\r\ntpl := web.NewGoTemplate(web.WithPattern("./templates/*.html"))\r\nserver := web.NewHTTPServer(web.WithTemplate(tpl))\r\n\r\n// \u65b9\u6cd5 2: \u4f7f\u7528\u670d\u52a1\u5668\u63a5\u53e3\u65b9\u6cd5\r\ntpl := web.NewGoTemplate(web.WithPattern("./templates/*.html"))\r\nserver := web.NewHTTPServer()\r\nserver.UseTemplate(tpl)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u6e32\u67d3\u6a21\u677f",children:"\u6e32\u67d3\u6a21\u677f"}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u5904\u7406\u51fd\u6570\u4e2d\u4f7f\u7528\u6a21\u677f\u5f15\u64ce\u6e32\u67d3\u9875\u9762:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'// \u6ce8\u518c\u4e00\u4e2a\u4f7f\u7528\u6a21\u677f\u7684\u8def\u7531\u5904\u7406\u5668\r\nserver.Get("/", func(ctx *web.Context) {\r\n    // \u51c6\u5907\u6a21\u677f\u6570\u636e\r\n    data := map[string]interface{}{\r\n        "Title":   "Welcome to WebFrame",\r\n        "Message": "Hello, World!",\r\n        "User": map[string]string{\r\n            "Name": "John Doe",\r\n            "Role": "Admin",\r\n        },\r\n        "Items": []string{"Item 1", "Item 2", "Item 3"},\r\n    }\r\n    \r\n    // \u6e32\u67d3\u6a21\u677f\r\n    err := ctx.Template("home.html", data)\r\n    if err != nil {\r\n        ctx.InternalServerError("Failed to render template")\r\n        return\r\n    }\r\n})\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u7ba1\u7406\u6a21\u677f\u6587\u4ef6",children:"\u7ba1\u7406\u6a21\u677f\u6587\u4ef6"}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u8fd0\u884c\u65f6\u52a0\u8f7d\u548c\u91cd\u65b0\u52a0\u8f7d\u6a21\u677f:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'// \u4ece glob \u6a21\u5f0f\u52a0\u8f7d\u6a21\u677f\r\nif err := tpl.LoadFromGlob("./views/*.html"); err != nil {\r\n    log.Printf("Failed to load templates: %v", err)\r\n    return\r\n}\r\n\r\n// \u4ece\u7279\u5b9a\u6587\u4ef6\u5217\u8868\u52a0\u8f7d\u6a21\u677f\r\nif err := tpl.LoadFromFiles("./views/layout.html", "./views/page.html"); err != nil {\r\n    log.Printf("Failed to load templates: %v", err)\r\n    return\r\n}\r\n\r\n// \u624b\u52a8\u91cd\u65b0\u52a0\u8f7d\u6a21\u677f\uff08\u5728\u4f7f\u7528\u81ea\u52a8\u91cd\u8f7d\u65f6\u901a\u5e38\u4e0d\u9700\u8981\uff09\r\nif err := tpl.Reload(); err != nil {\r\n    log.Printf("Failed to reload templates: %v", err)\r\n    return\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u51fd\u6570",children:"\u81ea\u5b9a\u4e49\u51fd\u6570"}),"\n",(0,a.jsx)(n.p,{children:"WebFrame \u652f\u6301\u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u6781\u5927\u5730\u589e\u5f3a\u4e86\u6a21\u677f\u7684\u7075\u6d3b\u6027\u548c\u529f\u80fd\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u51fd\u6570",children:"\u6ce8\u518c\u81ea\u5b9a\u4e49\u51fd\u6570"}),"\n",(0,a.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"WithFuncMap"})," \u9009\u9879\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6a21\u677f\u51fd\u6570\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'// \u521b\u5efa\u5305\u542b\u81ea\u5b9a\u4e49\u51fd\u6570\u7684\u6a21\u677f\u5f15\u64ce\r\ntpl := web.NewGoTemplate(\r\n    web.WithPattern("./templates/*.html"),\r\n    web.WithFuncMap(template.FuncMap{\r\n        // \u683c\u5f0f\u5316\u65e5\u671f\u65f6\u95f4\r\n        "formatDate": func(t time.Time, layout string) string {\r\n            return t.Format(layout)\r\n        },\r\n        \r\n        // \u622a\u53d6\u5b57\u7b26\u4e32\r\n        "truncate": func(s string, length int) string {\r\n            if len(s) <= length {\r\n                return s\r\n            }\r\n            return s[:length] + "..."\r\n        },\r\n        \r\n        // \u751f\u6210 URL\r\n        "url": func(path string, params ...string) string {\r\n            // \u57fa\u672c\u8def\u5f84\r\n            result := path\r\n            \r\n            // \u6dfb\u52a0\u67e5\u8be2\u53c2\u6570\r\n            if len(params) > 0 && len(params)%2 == 0 {\r\n                result += "?"\r\n                for i := 0; i < len(params); i += 2 {\r\n                    if i > 0 {\r\n                        result += "&"\r\n                    }\r\n                    result += params[i] + "=" + url.QueryEscape(params[i+1])\r\n                }\r\n            }\r\n            \r\n            return result\r\n        },\r\n        \r\n        // \u6761\u4ef6\u5224\u65ad\r\n        "ifThen": func(condition bool, then, otherwise interface{}) interface{} {\r\n            if condition {\r\n                return then\r\n            }\r\n            return otherwise\r\n        },\r\n    }),\r\n)\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u51fd\u6570",children:"\u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u51fd\u6570"}),"\n",(0,a.jsx)(n.p,{children:"\u6a21\u677f\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u51fd\u6570\u7684\u4f8b\u5b50\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'\x3c!-- \u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u51fd\u6570 --\x3e\r\n<div class="article">\r\n    <h2>{{ .Title }}</h2>\r\n    <p class="timestamp">Published: {{ formatDate .PublishedAt "Jan 2, 2006" }}</p>\r\n    \r\n    <div class="summary">\r\n        {{ truncate .Content 200 }}\r\n    </div>\r\n    \r\n    <a href="{{ url "/article" "id" .ID }}">Read more</a>\r\n    \r\n    <div class="status">\r\n        Status: {{ ifThen .IsPublished "Published" "Draft" }}\r\n    </div>\r\n</div>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u5e38\u7528\u81ea\u5b9a\u4e49\u51fd\u6570\u793a\u4f8b",children:"\u5e38\u7528\u81ea\u5b9a\u4e49\u51fd\u6570\u793a\u4f8b"}),"\n",(0,a.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5728 Web \u5e94\u7528\u4e2d\u5e38\u7528\u7684\u6a21\u677f\u51fd\u6570\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'funcMap := template.FuncMap{\r\n    // \u6570\u503c\u51fd\u6570\r\n    "add": func(a, b int) int {\r\n        return a + b\r\n    },\r\n    "subtract": func(a, b int) int {\r\n        return a - b\r\n    },\r\n    "multiply": func(a, b int) int {\r\n        return a * b\r\n    },\r\n    "divide": func(a, b int) float64 {\r\n        if b == 0 {\r\n            return 0\r\n        }\r\n        return float64(a) / float64(b)\r\n    },\r\n    \r\n    // \u5b57\u7b26\u4e32\u51fd\u6570\r\n    "lower": strings.ToLower,\r\n    "upper": strings.ToUpper,\r\n    "title": strings.Title,\r\n    \r\n    // \u5207\u7247\u51fd\u6570\r\n    "first": func(items []interface{}) interface{} {\r\n        if len(items) == 0 {\r\n            return nil\r\n        }\r\n        return items[0]\r\n    },\r\n    "last": func(items []interface{}) interface{} {\r\n        if len(items) == 0 {\r\n            return nil\r\n        }\r\n        return items[len(items)-1]\r\n    },\r\n    "join": strings.Join,\r\n    \r\n    // HTML \u5b89\u5168\r\n    "safeHTML": func(s string) template.HTML {\r\n        return template.HTML(s)\r\n    },\r\n    \r\n    // JSON \u683c\u5f0f\u5316\r\n    "json": func(v interface{}) string {\r\n        b, err := json.Marshal(v)\r\n        if err != nil {\r\n            return ""\r\n        }\r\n        return string(b)\r\n    },\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u5e03\u5c40\u6a21\u677f",children:"\u5e03\u5c40\u6a21\u677f"}),"\n",(0,a.jsx)(n.p,{children:"WebFrame \u652f\u6301\u5e03\u5c40\u6a21\u677f\uff08\u4e5f\u79f0\u4e3a\u6bcd\u7248\u9875\uff09\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"\u521b\u5efa\u5e03\u5c40\u6a21\u677f",children:"\u521b\u5efa\u5e03\u5c40\u6a21\u677f"}),"\n",(0,a.jsx)(n.p,{children:"\u5e03\u5c40\u6a21\u677f\u5b9a\u4e49\u4e86\u9875\u9762\u7684\u6574\u4f53\u7ed3\u6784\uff0c\u5305\u542b\u5b50\u6a21\u677f\u5c06\u586b\u5145\u7684\u5185\u5bb9\u533a\u57df\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'\x3c!-- layout.html --\x3e\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>{{.Title}} - WebFrame</title>\r\n    <link rel="stylesheet" href="/static/css/style.css">\r\n    <meta name="viewport" content="width=device-width, initial-scale=1">\r\n    {{block "styles" .}}{{end}}\r\n</head>\r\n<body>\r\n    <header>\r\n        <h1>WebFrame Application</h1>\r\n        <nav>\r\n            <a href="/">Home</a>\r\n            <a href="/about">About</a>\r\n            <a href="/contact">Contact</a>\r\n        </nav>\r\n    </header>\r\n    \r\n    <main>\r\n        {{block "content" .}}\r\n            \x3c!-- \u9ed8\u8ba4\u5185\u5bb9\u5c06\u88ab\u8986\u76d6 --\x3e\r\n            <p>Default content</p>\r\n        {{end}}\r\n    </main>\r\n    \r\n    <footer>\r\n        <p>&copy; {{.CurrentYear}} WebFrame Example</p>\r\n    </footer>\r\n    \r\n    <script src="/static/js/main.js"><\/script>\r\n    {{block "scripts" .}}{{end}}\r\n</body>\r\n</html>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u521b\u5efa\u5185\u5bb9\u6a21\u677f",children:"\u521b\u5efa\u5185\u5bb9\u6a21\u677f"}),"\n",(0,a.jsxs)(n.p,{children:["\u5185\u5bb9\u6a21\u677f\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"{{define}}"})," \u548c ",(0,a.jsx)(n.code,{children:"{{template}}"})," \u5757\u5b9a\u4e49\u7279\u5b9a\u9875\u9762\u7684\u5185\u5bb9:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'\x3c!-- home.html --\x3e\r\n{{define "content"}}\r\n<div class="home-page">\r\n    <h2>{{.Title}}</h2>\r\n    <p>{{.Message}}</p>\r\n    \r\n    {{if .Items}}\r\n        <ul>\r\n            {{range .Items}}\r\n                <li>{{.}}</li>\r\n            {{end}}\r\n        </ul>\r\n    {{end}}\r\n</div>\r\n{{end}}\r\n\r\n{{define "styles"}}\r\n<style>\r\n    .home-page {\r\n        background-color: #f9f9f9;\r\n        padding: 20px;\r\n    }\r\n</style>\r\n{{end}}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528\u6a21\u677f\u7ec4\u5408",children:"\u4f7f\u7528\u6a21\u677f\u7ec4\u5408"}),"\n",(0,a.jsx)(n.p,{children:"\u5728 WebFrame \u4e2d\u52a0\u8f7d\u548c\u4f7f\u7528\u6a21\u677f\u7ec4\u5408:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'func main() {\r\n    // \u521b\u5efa\u5e76\u914d\u7f6e\u6a21\u677f\u5f15\u64ce\r\n    tpl := web.NewGoTemplate(\r\n        // \u6ce8\u610f\u987a\u5e8f\uff1a\u5148\u52a0\u8f7d\u5e03\u5c40\u6a21\u677f\uff0c\u518d\u52a0\u8f7d\u5185\u5bb9\u6a21\u677f\r\n        web.WithFiles("./views/layout.html", "./views/home.html", "./views/about.html"),\r\n    )\r\n    \r\n    server := web.NewHTTPServer(web.WithTemplate(tpl))\r\n    \r\n    // \u4f7f\u7528\u6a21\u677f\u4f5c\u4e3a\u9875\u9762\r\n    server.Get("/", func(ctx *web.Context) {\r\n        data := map[string]interface{}{\r\n            "Title":       "Home Page",\r\n            "Message":     "Welcome to our website!",\r\n            "Items":       []string{"Item 1", "Item 2", "Item 3"},\r\n            "CurrentYear": time.Now().Format("2006"),\r\n        }\r\n        \r\n        // \u6e32\u67d3\u5e03\u5c40\u6a21\u677f\uff0c\u5b83\u5c06\u5305\u542b home.html \u4e2d\u5b9a\u4e49\u7684\u5185\u5bb9\r\n        ctx.Template("layout.html", data)\r\n    })\r\n    \r\n    server.Get("/about", func(ctx *web.Context) {\r\n        data := map[string]interface{}{\r\n            "Title":       "About Us",\r\n            "Message":     "Learn more about our company",\r\n            "CurrentYear": time.Now().Format("2006"),\r\n        }\r\n        \r\n        // \u4e0e\u9996\u9875\u4f7f\u7528\u76f8\u540c\u7684\u5e03\u5c40\uff0c\u4f46\u6e32\u67d3\u4e0d\u540c\u7684\u5185\u5bb9\u6a21\u677f\r\n        ctx.Template("layout.html", data)\r\n    })\r\n    \r\n    server.Start(":8080")\r\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u5d4c\u5957\u6a21\u677f\u548c\u90e8\u5206\u89c6\u56fe",children:"\u5d4c\u5957\u6a21\u677f\u548c\u90e8\u5206\u89c6\u56fe"}),"\n",(0,a.jsx)(n.p,{children:"\u521b\u5efa\u53ef\u91cd\u7528\u7684\u90e8\u5206\u89c6\u56fe\uff0c\u8fdb\u4e00\u6b65\u63d0\u9ad8\u4ee3\u7801\u590d\u7528:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'\x3c!-- partials/header.html --\x3e\r\n{{define "header"}}\r\n<header>\r\n    <h1>{{.SiteName}}</h1>\r\n    <nav>\r\n        <a href="/">Home</a>\r\n        <a href="/about">About</a>\r\n        <a href="/contact">Contact</a>\r\n        {{if .User}}\r\n            <a href="/profile">Welcome, {{.User.Name}}</a>\r\n            <a href="/logout">Logout</a>\r\n        {{else}}\r\n            <a href="/login">Login</a>\r\n            <a href="/register">Register</a>\r\n        {{end}}\r\n    </nav>\r\n</header>\r\n{{end}}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u5e03\u5c40\u6a21\u677f\u4e2d\u4f7f\u7528\u90e8\u5206\u89c6\u56fe:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'\x3c!-- layout.html --\x3e\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>{{.Title}} - {{.SiteName}}</title>\r\n    \x3c!-- ... --\x3e\r\n</head>\r\n<body>\r\n    {{template "header" .}}\r\n    \r\n    <main>\r\n        {{block "content" .}}{{end}}\r\n    </main>\r\n    \r\n    {{template "footer" .}}\r\n    \x3c!-- ... --\x3e\r\n</body>\r\n</html>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u9ad8\u7ea7\u5e03\u5c40\u6280\u5de7",children:"\u9ad8\u7ea7\u5e03\u5c40\u6280\u5de7"}),"\n",(0,a.jsx)(n.h4,{id:"\u591a\u7ea7\u5e03\u5c40",children:"\u591a\u7ea7\u5e03\u5c40"}),"\n",(0,a.jsx)(n.p,{children:"\u521b\u5efa\u591a\u7ea7\u5e03\u5c40\u7ed3\u6784\uff0c\u9002\u7528\u4e8e\u590d\u6742\u7f51\u7ad9:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'\x3c!-- base.html - \u6700\u57fa\u7840\u7684\u5e03\u5c40 --\x3e\r\n<!DOCTYPE html>\r\n<html>\r\n\x3c!-- ... --\x3e\r\n<body>\r\n    {{template "header" .}}\r\n    <div class="container">\r\n        {{block "layout" .}}{{end}}\r\n    </div>\r\n    {{template "footer" .}}\r\n</body>\r\n</html>\r\n\r\n\x3c!-- dashboard-layout.html - \u4eea\u8868\u677f\u7279\u6709\u5e03\u5c40 --\x3e\r\n{{define "layout"}}\r\n<div class="dashboard">\r\n    <aside class="sidebar">\r\n        {{template "sidebar" .}}\r\n    </aside>\r\n    <main class="content">\r\n        {{block "dashboard-content" .}}{{end}}\r\n    </main>\r\n</div>\r\n{{end}}\r\n\r\n\x3c!-- dashboard-users.html - \u7279\u5b9a\u9875\u9762\u5185\u5bb9 --\x3e\r\n{{define "dashboard-content"}}\r\n<h2>Users Management</h2>\r\n<table class="users-table">\r\n    \x3c!-- Users table content --\x3e\r\n</table>\r\n{{end}}\n'})}),"\n",(0,a.jsx)(n.h4,{id:"\u6570\u636e\u7ec4\u5408",children:"\u6570\u636e\u7ec4\u5408"}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u5d4c\u5957\u6a21\u677f\u65f6\u5408\u5e76\u6570\u636e:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'server.Get("/dashboard/users", func(ctx *web.Context) {\r\n    // \u57fa\u672c\u9875\u9762\u6570\u636e\r\n    baseData := map[string]interface{}{\r\n        "Title":       "User Management",\r\n        "SiteName":    "Admin Portal",\r\n        "CurrentYear": time.Now().Format("2006"),\r\n        "User": map[string]string{\r\n            "Name": "Admin",\r\n            "Role": "Administrator",\r\n        },\r\n    }\r\n    \r\n    // \u9875\u9762\u7279\u5b9a\u6570\u636e\r\n    usersData := map[string]interface{}{\r\n        "Users": []map[string]interface{}{\r\n            {"ID": 1, "Name": "John", "Email": "john@example.com"},\r\n            {"ID": 2, "Name": "Jane", "Email": "jane@example.com"},\r\n            {"ID": 3, "Name": "Bob", "Email": "bob@example.com"},\r\n        },\r\n        "TotalUsers": 3,\r\n    }\r\n    \r\n    // \u5408\u5e76\u6570\u636e\r\n    data := baseData\r\n    for k, v := range usersData {\r\n        data[k] = v\r\n    }\r\n    \r\n    // \u6e32\u67d3\u6a21\u677f\u94fe\r\n    ctx.Template("base.html", data)\r\n})\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>s});var t=r(6540);const a={},l=t.createContext(a);function i(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);